<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Do List</title>
    <link rel="stylesheet" href="/css/to-do.css">
</head>
<body>
    <main class="main">
        <section class="main-grid">
            <div class="main-grid-to-do" id="main-grid-to-do">
                <div class="main-grid-to-do-title">
                    <h2>To Do</h2><span class="amount" id="todo-amount"></span>
                </div>
                <div class="main-grid-to-do-list" id="main-grid-to-do-list">

                </div>
                <div class="main-grid-to-do-input" id="main-grid-to-do-input">
                    <input class="new-btn" id="todo-new-input" placeholder="+ New">
                    <button id="todo-new">✓</button>
                </div>
            </div>
            <div class="main-grid-doing" id="main-grid-doing">
                <div class="main-grid-doing-title">
                    <h2>Doing</h2><span class="amount" id="doing-amount"></span>
                </div>
                <div class="main-grid-doing-list" id="main-grid-doing-list">

                </div>
                <div class="main-grid-doing-input" id="main-grid-doing-input">
                    <input class="new-btn" id="doing-new-input" placeholder="+ New">
                    <button id="doing-new">✓</button>
                </div>
            </div>
            <div class="main-grid-done" id="main-grid-done">
                <div class="main-grid-done-title">
                    <h2>Done</h2><span class="amount" id="done-amount"></span>
                </div>
                <div class="main-grid-done-list" id="main-grid-done-list">

                </div>
                <div class="main-grid-done-input" id="main-grid-done-input">
                    <input class="new-btn" id="done-new-input" placeholder="+ New">
                    <button id="done-new">✓</button>
                </div>
            </div>
        </section>
        <section class="main-info">
            <div class="main-info-text">
                <p>The list will save when you add or delete an item</p>
                <p>Add items with the save button or enter, delete items with the delete button</p>
                <p>Transfer items between columns by dragging and dropping the item</p>
                <p>The list will be saved in local storage as long as you don't clear it</p>
                <p>You can clear the list in local storage with <span class="code">localStorage.clear('obj')</span></p>
            </div>
            <button id="sign-in">sign in</button>
        </section>
    </main>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-auth.js";
        import { getDatabase, set, get, ref, update} from "https://www.gstatic.com/firebasejs/9.20.0/firebase-database.js";
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBMPSHMl12La6g8xmpkO2q0MrYp5u_ZIas",
            authDomain: "to-do-list-1c280.firebaseapp.com",
            // authDomain: "giancoppola.github.io",
            projectId: "to-do-list-1c280",
            storageBucket: "to-do-list-1c280.appspot.com",
            messagingSenderId: "77052671119",
            appId: "1:77052671119:web:9f82c80308e0599462ecfa",
            databaseURL: "https://to-do-list-1c280-default-rtdb.europe-west1.firebasedatabase.app",
        };
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        // Initialize Firebase Authentication and get a reference to the service
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();
        document.querySelector('#sign-in').addEventListener('click', function() {
            signInWithPopup(auth, provider)
            .then((result) => {
                const credential = GoogleAuthProvider.credentialFromResult(result);
                const token = credential.accessToken;
                // The signed-in user info.
                const user = result.user;
                console.log(user)
                console.log(auth.uid)
            }).catch((error) => {
                // Handle Errors here.
                const errorCode = error.code;
                const errorMessage = error.message;
                // The email of the user's account used.
                const email = error.customData.email;
                // The AuthCredential type that was used.
                const credential = GoogleAuthProvider.credentialFromError(error);
                // ...
                console.log('error message');
                console.log(errorMessage);
                console.log(credential);
            });
        });
        // Initialize Realtime Database and get a reference to the service
        const database = getDatabase(app);
        console.log(auth.uid)
        console.log(ref(database, '/'));
    </script>
    <script type="text/javascript" src="/js/to-do-firebase.js"></script>
    <script type="text/javascript" src="/js/to-do-login.js"></script>
    <script type="text/javascript" src="/js/to-do.js"></script>
</body>
</html>